<?xml version="1.0"?>
<!DOCTYPE hibernate-mapping PUBLIC
        "-//Hibernate/Hibernate Mapping DTD 3.0//EN"
        "http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd">


<hibernate-mapping package= "net.sf.gratia.storage">

  <class name="Role" table="Role" node="Role" lazy="false">
    <id name="roleid" column="roleid" type="int">
      <generator class="native"/>
    </id>
    <property name="role" column="role"/>
    <property name="subtitle" column="subtitle"/>
    <property name="whereClause" column="whereClause"/>
  </class>

  <class name="CPUMetricTypes" table="CPUMetricTypes" node="CPUMetricTypes" lazy="false">
    <id name="id" column="id" type="int">
      <generator class="native"/>
    </id>
    <property name="CPUMetricType" column="CPUMetricType"/>
  </class>

  <class name="SystemProplist" table="SystemProplist" node="SystemProplist" lazy="false">
    <id name="propid" column="propid" type="int">
      <generator class="native"/>
    </id>
    <property name="car">
      <column name="car" not-null="true" default="''" />
    </property>
    <property name="cdr" column="cdr"/>
  </class>

  <class name="DupRecord" table="DupRecord" node="DupRecord" lazy="false">
    <id name="dupid" column="dupid" type="int">
      <generator class="native"/>
    </id>
    <property name="eventdate" column="eventdate" type="timestamp"/>
    <property name="rawxml" column="rawxml" type="text"/>
    <property name="extraxml" column="extraxml" type="text"/>
    <property name="source" column="source"/>
    <property name="error" column="error"/>
    <property name="dbid" column="dbid" type="int"/>
    <property name="RecordType" column="RecordType"/>
  </class>

  <class name="Replication" table="Replication" node="Replication" lazy="false">
    <id name="replicationid" column="replicationid" type="int">
      <generator class="native"/>
    </id>
    <property name="registered" column="registered" type="int"/>
    <property name="running" column="running" type="int"/>
    <property name="security" column="security" type="int"/>
    <property name="openconnection" column="openconnection"/>
    <property name="secureconnection" column="secureconnection"/>
    <property name="frequency" column="frequency" type="int"/>
    <property name="dbid" column="dbid" type="int"/>
    <property name="rowcount" column="rowcount" type="int"/>
    <property name="probename" column="probename"/>
    <property name="recordtable" column="recordtable"/>
  </class>

  <class name="Security" table="Security" node="Security" lazy="false">
    <id name="securityid" column="securityid" type="int">
      <generator class="native"/>
    </id>
    <property name="source" column="source"/>
    <property name="alias" column="alias"/>
    <property name="hostpem" column="hostpem" type="text"/>
    <property name="state" column="state"/>
  </class>

  <class name="CPUInfo"
	table="CPUInfo"
	node="CPUInfo" lazy="false">

    <id name="_id"
            column="HostId"
            type="int">
      <generator class="native"/>
    </id>

    <property name="_hostDescription" column="HostDescription"/>
    <property name="_benchmarkScore" column="BenchmarkScore"/>
    <property name="_CPUCount" column="CPUCount"/>
    <property name="_OS" column="OS"/>
    <property name="_OSVersion" column="OSVersion"/>
    <property name="_CPUType" column="CPUType"/>
  </class>

  <class name="VO" table="VO" node="VO" lazy="false">
    <id name="VOid" column="VOid" type="int">
       <generator class="native"/>
    </id>
    <property name="VOName" type="string">
      <column name="VOName" sql-type="varchar(255) binary" unique="true" />
    </property>
  </class>
  
  <class name="VONameCorrection" table="VONameCorrection" node="VONameCorrection" lazy="false">
     <id name="corrid" column="corrid" type="int">
        <generator class="native"/>
     </id>
     <property name="VOName" type="string">
       <column name="VOName" sql-type="varchar(255) binary" />
     </property>
     <property name="ReportableVOName" type="string">
       <column name="ReportableVOName" sql-type="varchar(255) binary" />
     </property>
     <property name="VOid" column="VOid" type="int"/>
  </class>
       
  <class name="Site" table="Site" node="Site" lazy="false">
    <id name="siteid" column="siteid" type="int">
      <generator class="native"/>
    </id>
    <property name="siteName" column="SiteName"/>
  </class>

  <class name="Probe" table="Probe" node="Probe" lazy="false">
    <id name="probeid" column="probeid" type="int">
      <generator class="native"/>
    </id>
    <many-to-one name="site" column="siteid" not-null="true"/>
    <property name="probename" column="probename"/>
    <property name="active" column="active" type="int"/>
    <component name="currenttime" class="DateElement" insert="true">
      <property name="Value" column="currenttime" type="timestamp"  />
      <property name="Description" column="CurrentTimeDescription" />
    </component>
    <property name="reporthh" column="reporthh" type="int"/>
    <property name="reportmm" column="reportmm" type="int"/>
    <property name="status"/>
    <property name="nRecords"/>
    <property name="nDuplicates"/>
    <property name="nConnections"/>
  </class>

  <class name="ProbeDetails"  table="ProbeDetails"
         node="ProbeDetails" lazy="false">

    <id name="RecordId" column="dbid" type="integer">
        <generator class="native"/>
    </id>

    <set name="Software" table="ProbeSoftware">
       <key column="dbid"/>
       <many-to-many column="softid" class="Software"/>
    </set>

    <join table="ProbeDetails_Meta">
      <key column="dbid"/>

      <component name="RecordIdentity" class="RecordIdentity" insert="true">
        <property name="recordId"
              column="recordId"
              type="string"/>
        <component name="CreateTime" class="DateElement" insert="true">
            <property name="Value" column="CreateTime" type="timestamp"  />
            <property name="Description" column="CreateTimeDescription" />
        </component>
      </component>

      <component name="ProbeName" class="StringElement" insert="true">
        <property name="Value" column="ProbeName" />
        <property name="Description" column="ProbeNameDescription" />
      </component>

      <many-to-one name="Probe" class="Probe" column="probeid"/>

      <component name="SiteName" class="StringElement" insert="true">
        <property name="Value" column="SiteName" />
        <property name="Description" column="SiteNameDescription" />
      </component>

      <component name="Grid" class="StringElement" insert="true"> 
        <property name="Value" column="Grid" /> 
      </component> 

      <property name="ServerDate" column="ServerDate" type="timestamp"/>
      <property name="md5" column="md5" index="index12" unique="true"/>
    </join>

    <join table="ProbeDetails_Xml">
      <key column="dbid"/>
      <property name="ExtraXml" type="text"/>
      <property name="RawXml" type="text" />
    </join>

  </class>

  <class name="Software" table="Software" node="Software">
    <id name="softid" column="dbid" type="integer">
        <generator class="native"/>
    </id>
    <property name="Type"/>
    <property name="Name"/>
    <property name="Version"/>
    <property name="md5" column="md5" index="index12" unique="true"/>
  </class>

</hibernate-mapping>
